<!-- dasboard.component.html - Version avec navigation accordéon -->
<div class="dashboard-container">
<app-header></app-header>
  <!-- Bouton hamburger -->
  <button class="hamburger-btn"
          [class.active]="isSidebarOpen"
          (click)="toggleSidebar()"
          aria-label="Menu de navigation">
    <div class="hamburger-icon">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </button>


  <!-- Sidebar -->
  <aside class="sidebar" [class.active]="isSidebarOpen">
    <div class="sidebar-header">
      <h3>Menu</h3>
      <p class="welcome-message">Bienvenue, <span class="display-name">{{displayName}}</span> !</p>
    </div>

    <nav class="sidebar-nav">
      <!-- Navigation accordéon -->
      @for (section of menuSections; track section.id) {
        <div class="menu-section">
          <!-- En-tête de section -->
          <div class="section-header"
               (click)="toggleSection(section.id)"
               [class.expanded]="section.isExpanded">
            <div class="section-title">
              <i [class]="section.icon + ' section-icon'"></i>
              <span>{{section.title}}</span>
            </div>
            <i class="bi bi-chevron-right chevron-icon"
               [class.rotated]="section.isExpanded"></i>
          </div>

          <!-- Items de la section -->
          <div class="section-items"
               [class.expanded]="section.isExpanded">
            <ul>
              @for (item of section.items; track item.route) {
                <li>
                  <a [routerLink]="item.route"
                     class="nav-link"
                     routerLinkActive="active"
                     (click)="onNavLinkClick()">
                    @if (item.icon) {
                      <i [class]="item.icon + ' me-2'"></i>
                    }
                    {{item.title}}
                  </a>
                </li>
              }
            </ul>
          </div>
        </div>
      }

      <!-- Actions globales (toujours visibles) -->
      <div class="global-actions">
        <hr class="separator">
        <div class="menu-section">
          <ul>
            <li>
              <a routerLink="/dashboard/change-password"
                 class="nav-link"
                 (click)="onNavLinkClick()">
                <i class="bi bi-key me-2"></i>
                Changer Mot de passe
              </a>
            </li>
            <li>
              <a (click)="logout()"
                 class="nav-link logout-link">
                <i class="bi bi-box-arrow-right me-2"></i>
                Déconnexion
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </aside>

  <!-- Overlay pour fermer le menu -->
  <div class="sidebar-overlay"
       [class.active]="isSidebarOpen"
       (click)="closeSidebar()"></div>

  <!-- Contenu principal -->
  <main class="content">
    <div class="content-header">
      <router-outlet></router-outlet>
    </div>
  </main>
</div>
