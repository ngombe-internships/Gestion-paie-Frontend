/* =========================
   Palette & thèmes (CSS vars)
   ========================= */
.calendrier-container {
  --bg: #f3f4f6;
  --surface: #ffffff;
  --surface-2: #f8fafc;
  --text: #0f172a;
  --muted: #6b7280;
  --border: #e5e7eb;

  --primary: #6366f1;
  --primary-600: #4f46e5;
  --info: #06b6d4;
  --success: #16a34a;
  --warning: #f59e0b;
  --danger: #ef4444;

  --shadow-sm: 0 2px 6px rgba(2,6,23,.07);
  --shadow-md: 0 6px 20px rgba(2,6,23,.08);
  --radius: 12px;
}

/* Mode sombre optionnel : .calendrier-container[data-theme="dark"] */
.calendrier-container[data-theme="dark"]{
  --bg: #0b1220;
  --surface: #0f172a;
  --surface-2: #111827;
  --text: #e5e7eb;
  --muted: #a5b4fc;
  --border: #1f2937;

  --primary: #818cf8;
  --primary-600: #6366f1;
  --info: #22d3ee;
  --success: #34d399;
  --warning: #fbbf24;
  --danger: #f87171;

  --shadow-sm: 0 2px 6px rgba(0,0,0,.35);
  --shadow-md: 0 10px 30px rgba(0,0,0,.35);
}

/* =========================
   Conteneur principal
   ========================= */
.calendrier-container{
  background: linear-gradient(180deg, var(--bg), color-mix(in srgb, var(--bg) 88%, #fff));
  padding: 14px;
  border-radius: var(--radius);
  box-shadow: var(--shadow-sm);
  color: var(--text);
  font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

/* =========================
   En-tête
   ========================= */
.page-header{
  background: var(--surface);
  padding: 16px 18px;
  border-radius: calc(var(--radius) - 2px);
  margin-bottom: 12px;
  box-shadow: var(--shadow-sm);
  border: 1px solid var(--border);
}
.page-title{
  margin: 0;
  font-size: 1.85rem;
  font-weight: 700;
  color: #0d6efd;
  text-align: center;
}
.page-subtitle{
  margin: 2px 0 0;
  font-size: .9rem;
  color: var(--muted);
}
.header-actions .btn{
  border-radius: 8px !important;
  transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.header-actions .btn:hover{
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

/* =========================
   Navigation du mois
   ========================= */
.month-navigation{
  display:flex; align-items:center; justify-content:space-between;
  gap: 10px;
  background: var(--surface);
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid var(--border);
  margin-bottom: 12px;
  box-shadow: var(--shadow-sm);
}
.month-display{display:flex; align-items:center; gap:10px;}
.month-title{
  font-size:1.15rem; font-weight:650; color:var(--text); margin:0;
}
.btn-today{
  background: var(--primary);
  color:#fff; border: none; padding: 6px 10px; border-radius: 8px;
  font-size:.85rem; transition: background .18s ease, transform .18s ease;
}
.btn-today:hover{ background: var(--primary-600); transform: translateY(-1px); }
.nav-btn{
  background: var(--surface-2); border:1px solid var(--border);
  border-radius:8px; padding: 6px 9px; font-size:1.1rem;
  transition: background .18s ease, transform .18s ease;
}
.nav-btn:hover{ background: color-mix(in srgb, var(--surface-2) 80%, var(--primary) 20%); transform: translateY(-1px); }

/* =========================
   Statistiques
   ========================= */
.stats-grid{
  display:grid; grid-template-columns: repeat(auto-fit, minmax(120px,1fr));
  gap:10px; margin-bottom: 12px;
}
.stat-item{
  background: var(--surface);
  border:1px solid var(--border);
  border-radius:10px; padding: 10px;
  text-align:center; color: var(--text);
  box-shadow: var(--shadow-sm);
  transition: transform .18s ease, box-shadow .18s ease;
}
.stat-item:hover{ transform: translateY(-2px); box-shadow: var(--shadow-md); }
.stat-item .stat-value{ font-size:1.25rem; font-weight:800; letter-spacing:.2px; }
.stat-item.primary{ background: color-mix(in srgb, var(--surface) 80%, var(--primary) 20%); }
.stat-item.info{ background: color-mix(in srgb, var(--surface) 85%, var(--info) 15%); }
.stat-item.warning{ background: color-mix(in srgb, var(--surface) 88%, var(--warning) 12%); }
.stat-item.danger{ background: color-mix(in srgb, var(--surface) 86%, var(--danger) 14%); }
.stat-item.secondary{ background: var(--surface-2); }
.stat-item.success{ background: color-mix(in srgb, var(--surface) 88%, var(--success) 12%); }

/* =========================
   Onglets
   ========================= */
.view-tabs{ display:flex; gap:8px; margin-bottom:12px; }
.tab-btn{
  flex:1; background: var(--surface); color: var(--text);
  border:1px solid var(--border); padding:10px; border-radius:10px;
  font-weight:600; transition: background .18s ease, color .18s ease, transform .18s ease;
}
.tab-btn:hover{ background: color-mix(in srgb, var(--surface) 85%, var(--primary) 15%); transform: translateY(-1px); }
.tab-btn.active{ background: var(--primary); color:#fff; border-color: transparent; }

/* =========================
   États (chargement/erreur)
   ========================= */
.loading-state, .error-state{
  background: var(--surface);
  border:1px solid var(--border);
  border-radius: 10px; padding: 18px; text-align:center;
  color: var(--text);
  box-shadow: var(--shadow-sm); margin-bottom:12px;
}
.error-state i{ color: var(--danger); font-size:1.4rem; }

/* =========================
   Calendrier : grille
   ========================= */
.calendar-container-modern{
  background: var(--surface);
  border:1px solid var(--border);
  padding: 12px; border-radius: 12px; box-shadow: var(--shadow-sm);
}
.calendar-header-grid{
  display:grid; grid-template-columns: repeat(7, 1fr);
  gap:6px; margin-bottom:6px;
}
.day-header{
  text-align:center; padding:8px 6px; font-weight:700; font-size:.9rem;
  color: var(--text); background: var(--surface-2);
  border:1px solid var(--border); border-radius: 8px;
}
.calendar-grid{
  display:grid; grid-template-columns: repeat(7, 1fr);
  gap:6px; overflow: visible; /* important pour les panneaux détails */
}
.day-cell{
  position: relative;
  min-height: 110px;
  background: color-mix(in srgb, #e9ecef 82%, #6c6c6c 18%);

  border:1px solid var(--border);
  border-radius: 10px; padding: 8px; transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
  overflow: visible; /* pour la popup absents */
}
.day-cell:hover{ transform: translateY(-2px); box-shadow: var(--shadow-sm); }

/* Contrastes conditionnels via :has() (améliore la lisibilité sans changer le TS) */
.day-cell:has(.holiday-info){
  background: color-mix(in srgb, var(--surface) 70%, var(--warning) 30%);
  border-color: color-mix(in srgb, var(--warning) 60%, var(--border) 40%);
}


.day-cell:has(.weekend-info){
  background:
    repeating-linear-gradient(135deg,
      color-mix(in srgb, var(--surface-2) 85%, #000 0%) 0 6px,
      color-mix(in srgb, #e9ecef 70%, #000 0%) 6px 12px);
}

/* En-tête du jour */
.day-number{
  display:flex; align-items:center; justify-content:space-between;
  font-weight:800; color: var(--text); margin-bottom: 6px;
}
.day-number .number{
  background: var(--surface);
  border:1px solid var(--border);
  padding: 4px 8px; border-radius: 999px; font-size:.85rem; line-height:1;
}
.today-indicator{
  width:8px; height:8px; border-radius:999px; display:inline-block;
  background: var(--primary);
}

/* Infos du jour */
.day-content{ display:flex; flex-direction: column; gap:6px; }
.holiday-info{
  display:flex; align-items:center; gap:6px;
  font-size:.8rem; font-weight:700; color: color-mix(in srgb, var(--warning) 70%, var(--text) 30%);
}
.work-info, .weekend-info{ display:flex; align-items:center; gap:10px; flex-wrap: wrap; }
.presence-indicator, .absence-indicator, .alert-indicator{
  display:inline-flex; align-items:center; gap:6px; font-size:.8rem; font-weight:650;
  background: var(--surface); border:1px solid var(--border);
  padding: 4px 8px; border-radius: 999px;
}
.presence-indicator{ color: var(--success); }
.absence-indicator{ color: var(--danger); }
.alert-indicator{ color: var(--warning); }
.weekend-info{ color: var(--muted); }

/* Bouton détails (œil) */
.details-btn{
  position:absolute; top:8px; right:8px;
  background: var(--surface); border:1px solid var(--border);
  padding: 6px; border-radius: 8px; line-height:0;
  transition: transform .18s ease, background .18s ease;
}
.details-btn:hover{ transform: translateY(-1px); background: color-mix(in srgb, var(--surface) 85%, var(--primary) 15%); }

/* =========================
   Panneau des absents (visibilité corrigée)
   ========================= */
.absents-details{
  position:absolute; left:8px; right:8px; bottom:8px;
  background: var(--surface);
  color: var(--text);
  border:1px solid var(--border);
  border-radius: 10px;
  box-shadow: var(--shadow-md);
  padding: 10px;
  z-index: 20; /* au-dessus des cellules */
  max-height: 160px; overflow: auto;
}
.absents-details .details-title{
  font-size:.85rem; font-weight:800; margin-bottom:6px; color: var(--text);
}
.absent-person{
  display:flex; align-items:center; justify-content:space-between;
  gap:8px; padding:6px 8px; border-radius:8px;
  background: var(--surface-2); border:1px solid var(--border);
  margin-bottom:6px;
}
.absent-person .name{ font-weight:700; font-size:.85rem; }
.absent-person .type{
  font-size:.75rem; font-weight:700; text-transform:capitalize;
  background: color-mix(in srgb, var(--primary) 20%, var(--surface) 80%);
  border:1px solid color-mix(in srgb, var(--primary) 40%, var(--border) 60%);
  padding:3px 8px; border-radius:999px;
}

/* Scrollbar doux (panneau absents) */
.absents-details::-webkit-scrollbar{ width:8px; }
.absents-details::-webkit-scrollbar-thumb{
  background: color-mix(in srgb, var(--primary) 35%, var(--surface) 65%);
  border-radius:8px;
}

/* =========================
   Tableaux (effectifs & conflits)
   ========================= */
.data-table-container{
  background: var(--surface); border:1px solid var(--border);
  border-radius: 12px; box-shadow: var(--shadow-sm); padding: 12px;
}
.table-header h3{ margin:0 0 8px; color: var(--text); }
.table-responsive{ border:1px solid var(--border); border-radius: 10px; overflow: hidden; }

.modern-table{ width:100%; border-collapse: collapse; font-size:.92rem; }
.modern-table thead th{
  position: sticky; top:0; z-index:1;
  background: color-mix(in srgb, var(--surface) 70%, var(--primary) 30%);
  color: #fff; text-align:center; padding:10px;
}
.modern-table tbody td{ padding:10px; text-align:center; border-top:1px solid var(--border); background: var(--surface); }
.modern-table tbody tr:nth-child(odd) td{ background: color-mix(in srgb, var(--surface) 95%, var(--primary) 5%); }

/* Hover inspiré de ton style */
.modern-table tbody tr:hover {
  background-color: rgba(99,102,241,.08);
  transform: translateX(5px);
  transition: all .2s ease;
}

/* Badges & statuts */
.badge{
  display:inline-block; font-size:.75rem; padding:.35em .65em; border-radius: 999px;
  background: var(--surface-2); border:1px solid var(--border); font-weight:700;
}
.badge.success{ color: var(--success); }
.badge.info{ color: var(--info); }
.badge.warning{ color: var(--warning); }
.badge.danger{ color: var(--danger); }
.badge.muted{ color: var(--muted); }

.status-badge{
  display:inline-flex; align-items:center; gap:6px;
  padding:6px 10px; border-radius: 999px; font-weight:800; color:#fff; text-transform:uppercase; font-size:.72rem;
  min-width: 90px; justify-content:center;
}
.status-généré { background: #6c757d; } /* Gris */
.status-validé { background: #007bff; } /* Bleu */
.status-envoyé { background: #28a745; } /* Vert */
.status-archivé { background: #17a2b8; } /* Cyan */
.status-annulé { background: #dc3545; } /* Rouge */

/* Lignes d'alerte en tableau */
.alert-row td{ background: color-mix(in srgb, var(--danger) 12%, var(--surface) 88%) !important; }

/* =========================
   Légende (contraste amélioré)
   ========================= */
.legend-container{
  margin-top: 12px; background: var(--surface);
  border:1px solid var(--border); border-radius: 12px; padding: 12px;
  box-shadow: var(--shadow-sm);
}
.legend-container h4{ margin:0 0 10px; color: var(--text); }
.legend-grid{
  display:grid; gap:10px;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
}
.legend-item{
  display:flex; align-items:center; gap:10px;
  background: var(--surface-2); border:1px solid var(--border); border-radius: 10px;
  padding: 8px 10px; font-weight:700; color: var(--text);
}
.legend-sample{
  width:20px; height:20px; border-radius:6px; border: 2px solid color-mix(in srgb, #000 10%, var(--border) 90%);
  box-shadow: var(--shadow-sm);
}
.today-sample   { background: var(--primary); }
.holiday-sample { background: var(--warning); }
.absence-sample { background: var(--danger); }
.alert-sample   { background: color-mix(in srgb, var(--danger) 65%, var(--warning) 35%); }
.weekend-sample {
  background:
    repeating-linear-gradient(135deg,
      color-mix(in srgb, var(--surface-2) 25%, #000 0%) 0 7px,
      color-mix(in srgb, #e9ecef 55%, #000 0%) 7px 14px);
}

/* =========================
   Boutons / utilitaires
   ========================= */
.btn-sm { padding: .25rem .5rem; font-size: .75rem; line-height:1.5; border-radius: .35rem; }
.btn-group .btn{ margin: 0 2px; border-radius: 8px !important; }
.card{ transition: transform .18s ease, box-shadow .18s ease; }
.card:hover{ transform: translateY(-2px); box-shadow: var(--shadow-sm); }
.input-group-text{ border-radius:8px 0 0 8px; }

/* =========================
   Responsive
   ========================= */
@media (max-width: 992px){
  .day-cell{ min-height: 120px; }
}
@media (max-width: 768px){
  .calendrier-container{ padding: 10px; }
  .day-header{ font-size:.8rem; }
  .day-cell{ min-height: 130px; }
  .absents-details{ max-height: 180px; }
  .legend-grid{ grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 576px){
  .month-title{ font-size:1rem; }
  .day-cell{ min-height: 140px; }
  .legend-grid{ grid-template-columns: 1fr; }
}

/* =========================
   BONUS : petits états visuels
   ========================= */
/* Survol cellule comme demandé */
.day-cell:hover{
  background-color: rgba(99, 102, 241, 0.06);
}
/* Rendre toute icône un peu plus lisible */
.bi{ vertical-align: middle; }

.day-cell.with-absences {
  position: relative;
  background: color-mix(in srgb, var(--surface-2) 85%, var(--danger) 15%) !important;
}

/* Styles pour les cartes statistiques */
.stats-card {
  transition: transform 0.2s ease;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.stats-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.stats-number {
  font-size: 2.8rem;
  font-weight: 700;
  margin-bottom: 0.25rem;
}

.stats-label {
  font-size: 1rem;
  font-weight: 500;
  margin: 0;
}

/* Variantes de couleurs */
.border-primary .card-body {
  border: 1px solid rgba(13, 110, 253, 0.2);
}

.border-success .card-body {
  border: 1px solid rgba(25, 135, 84, 0.2);
}

.border-warning .card-body {
  border: 1px solid rgba(255, 193, 7, 0.2);
}

.border-danger .card-body {
  border: 1px solid rgba(220, 53, 69, 0.2);
}

/* Responsive */
@media (max-width: 768px) {
  .stats-number {
    font-size: 2rem;
  }

  .stats-label {
    font-size: 0.9rem;
  }
}
